<UserControl xmlns="https://github.com/avaloniaui"
			 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
			 xmlns:data="using:UPExcursions.Data"
			 x:Class="UPExcursions.Views.ExcursionsView">

	<Grid>
		<Grid.RowDefinitions>
			<RowDefinition Height="1*"></RowDefinition>
			<RowDefinition Height="10*"></RowDefinition>
		</Grid.RowDefinitions>

		<StackPanel Grid.Row="0" Orientation="Horizontal" Spacing="10" Margin="10">
			<Button x:Name="AddButton" Content="+" Click="AddButton_Click" Width="40" Height="30" Background="white" BorderBrush="#4B0082"/>
			<Button x:Name="DeleteButton" Content="×" Click="DeleteButton_Click" Width="40" Height="30" Foreground="Red" Background="white" BorderBrush="#4B0082"/>


			<TextBlock Text="Category:" VerticalAlignment="Center" />
			<ComboBox x:Name="CategoryFilter" Width="200" BorderBrush="#4B0082" />

			<Button Content="Filter" Click="FilterButton_Click" Width="70" Background="#4B0082" Foreground="White"/>
			<Button Content="Clear" Click="ClearFiltersButton_Click" Width="70" Background="white" BorderBrush="#4B0082"/>
		</StackPanel>

		<ScrollViewer Grid.Row="1">
			<ListBox x:Name="ExcursionsListBox">
				<ListBox.ItemTemplate>
					<DataTemplate>
						<Border Width="900" Height="200"
								Background="#E6E6FA"
								Margin="0,8"
								CornerRadius="8"
								DoubleTapped="ExcursionsListBox_DoubleTapped">
							<Grid>
								<Grid.ColumnDefinitions>
									<ColumnDefinition Width="*" />
									<ColumnDefinition Width="Auto" />
								</Grid.ColumnDefinitions>

								<StackPanel Grid.Column="0" Margin="15,10">
									<TextBlock FontSize="20" FontWeight="Bold" Text="{Binding Title}" />
									<TextBlock FontSize="14" Text="{Binding Description}" TextWrapping="Wrap" Margin="0,5,0,10" />

									<StackPanel Orientation="Horizontal" Margin="0,0,0,5">
										<TextBlock Text="Category: " FontWeight="Bold" />
										<TextBlock Text="{Binding Category.CategoryName}" />
									</StackPanel>

									<StackPanel Orientation="Horizontal" Margin="0,0,0,5">
										<TextBlock Text="Duration: " />
										<TextBlock Text="{Binding DurationHours, StringFormat='{}{0} ч.'}" />
									</StackPanel>

									<StackPanel Orientation="Horizontal" Margin="0,0,0,5">
										<TextBlock Text="Price: " />
										<TextBlock Text="{Binding BasePrice, StringFormat='{}{0:F2} ₽'}" />
									</StackPanel>

									<StackPanel Orientation="Horizontal" Margin="0,5,0,0">
										<TextBlock Text="Date: " FontWeight="Bold" />
										<ItemsControl ItemsSource="{Binding ExcursionSessions}">
											<ItemsControl.ItemsPanel>
												<ItemsPanelTemplate>
													<StackPanel Orientation="Horizontal" />
												</ItemsPanelTemplate>
											</ItemsControl.ItemsPanel>
											<ItemsControl.ItemTemplate>
												<DataTemplate>
													<TextBlock Text="{Binding SessionDate, StringFormat='{}{0:dd.MM.yyyy}'}"
															   Margin="0,0,8,0" />
												</DataTemplate>
											</ItemsControl.ItemTemplate>
										</ItemsControl>
									</StackPanel>
								</StackPanel>

								<StackPanel Grid.Column="1"
											Orientation="Vertical"
											HorizontalAlignment="Right"
											VerticalAlignment="Top"
											Margin="0,15,15,0">
									<Button Content="Reviews"
											Tag="{Binding}"
											Click="ShowReviewsButton_Click"
											Width="90"
											Height="32"
											Background="#9400D3"
											Foreground="White" />
									<Button Content="       ♥"
											Tag="{Binding}"
											Click="AddToFavoritesButton_Click"
											Width="90"
											Height="32"
											Background="white"
											Foreground="#9400D3"/>
									<Button Content="Book"
											Tag="{Binding}"
											Click="BookExcursionButton_Click"
											Width="90"
											Height="32"
											Background="#9400D3"
											Foreground="White"/>
								</StackPanel>
							</Grid>
						</Border>
					</DataTemplate>
				</ListBox.ItemTemplate>
			</ListBox>
		</ScrollViewer>
	</Grid>
</UserControl>
